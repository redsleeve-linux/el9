From b8c71aa04c5f61b24435aa2b1ba15102faaa6baf Mon Sep 17 00:00:00 2001
From: Jacco Ligthart <jacco@redsleeve.org>
Date: Sat, 25 Nov 2023 21:53:46 +0100
Subject: [PATCH] added armv6 to rust_arches

---
 SPECS/rust.spec | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/SPECS/rust.spec b/SPECS/rust.spec
index 05c4277..303e148 100644
--- a/SPECS/rust.spec
+++ b/SPECS/rust.spec
@@ -1,6 +1,6 @@
 # Only x86_64, i686, and aarch64 are Tier 1 platforms at this time.
 # https://doc.rust-lang.org/nightly/rustc/platform-support.html
-%global rust_arches x86_64 i686 aarch64 ppc64le s390x
+%global rust_arches x86_64 i686 aarch64 ppc64le s390x armv6hl
 
 # The channel can be stable, beta, or nightly
 %{!?channel: %global channel stable}
@@ -84,7 +84,7 @@
 
 Name:           rust
 Version:        1.71.1
-Release:        1%{?dist}
+Release:        1%{?dist}.redsleeve
 Summary:        The Rust Programming Language
 License:        (ASL 2.0 or MIT) and (BSD and MIT)
 # ^ written as: (rust itself) and (bundled libraries)
@@ -135,6 +135,9 @@ Patch101:       rustc-1.71.0-disable-http2.patch
   if arch == "armv7hl" then
     arch = "armv7"
     abi = "gnueabihf"
+  elseif arch == "armv6hl" then
+    arch = "arm"
+    abi = "gnueabihf"
   elseif arch == "ppc64" then
     arch = "powerpc64"
   elseif arch == "ppc64le" then
@@ -1077,6 +1080,9 @@ end}
 
 
 %changelog
+* Sat Nov 25 2023 Jacco Ligthart <jacco@redsleeve.org> - 1.71.1-1.redsleeve
+- added armv6 to rust_arches
+
 * Tue Aug 08 2023 Josh Stone <jistone@redhat.com> - 1.71.1-1
 - Update to 1.71.1.
 - Security fix for CVE-2023-38497
-- 
2.39.3

